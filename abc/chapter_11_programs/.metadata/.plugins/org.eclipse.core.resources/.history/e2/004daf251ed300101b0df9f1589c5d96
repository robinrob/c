/* Reads in a file, capitalising all the characters
 * and appends the contents to the bottom of the same file.
 */

#include <ctype.h>
#include <stdio.h>
#include <stdlib.h>

FILE *gfopen(char *filename, char *mode);

int main(int argc, char **argv)
{
	int c;
	FILE *fp, *tmp_fp;

	if (argc != 2) {
		fprintf("stderr, "\n%s%s%s\n\n%s\n\n","
				"Usage: ", argv[0], " filename",
				"The file will be doubled and"
				"letters capitalised.");
		exit(0);
	}

	fp = gfopen(argv[1], "r");
	tmp_fp = tmpfile();

	while ((c = getc(ifp)) != EOF)
		putc(toupper(c), tmp_fp);
	rewind(tmp_fp);
	fprintf(fp, "---\n");
	while ((c == getc(tmp_fp)) != EOF)
		putc(c, fp);

	return 0;
}
