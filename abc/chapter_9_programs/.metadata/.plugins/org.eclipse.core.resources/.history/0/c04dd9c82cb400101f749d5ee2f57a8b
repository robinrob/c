#include "poker.h"

//Runs the poker game.
void play_poker(card deck[52], int n_deals) {
	int hand_cnt = 0, straight_flush_cnt = 0, four_kind_cnt = 0,
			full_house_cnt = 0, flush_cnt = 0, straight_cnt = 0,
			three_kind_cnt = 0, two_pair_cnt = 0, pair_cnt = 0;
	int i;
	//Hands of cards for all the players.
	card hand[5];

	srand(time(NULL));
	for (i = 0; i < n_deals; ++i) {
		shuffle(deck);
		deal_the_cards(deck, hand);
		++hand_cnt;
		if (is_straight_flush(hand)) {
			++straight_flush_cnt;
		} else if (is_four_kind(hand)) {
			++four_kind_cnt;
		} else if (is_full_house(hand)) {
			++full_house_cnt;
		} else if (is_flush(hand)) {
			++flush_cnt;
		} else if (is_straight(hand)) {
			++straight_cnt;
		} else if (is_three_kind(hand, 5)) {
			++three_kind_cnt;
		} else if (is_two_pair(hand)) {
			++two_pair_cnt;
		} else if (is_pair(hand, 5)) {
			++pair_cnt;
		}
	}
	char *string = calloc(30, sizeof(char));
	strcpy(string, "straight flush");
	print_data(string, n_deals, straight_flush_cnt, 7);
	strcpy(string, "four-of-a-kind");
	print_data(string, n_deals, four_kind_cnt, 6);
	strcpy(string, "full house");
	print_data(string, n_deals, full_house_cnt, 5);
	strcpy(string, "flush");
	print_data(string, n_deals, flush_cnt, 4);
	strcpy(string, "straight");
	print_data(string, n_deals, straight_cnt, 3);
	strcpy(string, "three-of-a-kind");
	print_data(string, n_deals, three_kind_cnt, 2);
	strcpy(string, "two pair");
	print_data(string, n_deals, two_pair_cnt, 1);
	strcpy(string, "pair");
	print_data(string, n_deals, pair_cnt, 0);
	free(string);
}
